<h1>投稿詳細</h1>

<div class="post">
  <% if @post.user_id == current_user.id %>
    <%= link_to "編集", edit_post_path(@post.id) %>
  <% end %>
  <h4>投稿画像</h4>
  <%= attachment_image_tag @post, :image %>
  <h4>投稿文章</h4>
  <%= @post.caption %>

  <% if @post.user_id != current_user.id %>
    <!--お気に入り-->
    <% if @post.favorited_by?(current_user) %>
      <p>
        <%= link_to post_favorites_path(@post.id), method: :delete do %>
          <i class="fas fa-heart" style="color:orangered;"></i>
        <% end %>
      </p>
    <% else %>
      <p>
        <%= link_to post_favorites_path(@post.id), method: :post do %>
          <i class="far fa-heart" style="color:black;"></i>
        <% end %>
      </p>
    <% end %>
  <% end %>

</div>

<div class="comments">
  <% @post.comments.each do |comment| %>
    <%= comment.user.name %>
    <%= comment.comment %>
    <% if comment.user == current_user %>
      <%= link_to '削除', post_comment_path(comment.post.id, comment.id), method: :delete %>
    <% end %>
  <% end %>
</div>

<div class="new-comment">
  <%= form_with(model:[@post, @comment], local: true) do |f| %>
    <%= f.text_area :comment, rows:'3' %>
    <%= f.submit 'コメント投稿' %>
  <% end %>
</div>