

<% visitor = notification.visitor %>
<% visited = notification.visited %>

<div id="notifications">
  <%= link_to user_path(visitor) do %>
    <%= attachment_image_tag visitor, :image, :fill, 50, 50, fallback: "dogs-icon.jpg", size:'50x50', class: "user-image" %>
    <strong><%= visitor.user_name %></strong>
  <% end %>
  <span>さんが</span>



  <% case notification.action %>
  <% when 'follow' then %>
    <p>あなたをフォローしました</p>
  <% when 'like' then %>
    <p><%= link_to 'あなたの投稿', notification.post, id: "notification-link1" %>にいいねしました</p>
  <% when 'comment' then %>
    <% if notification.post.user_id == visited.id %>
      <p><%= link_to 'あなたの投稿', notification.post, id: "notification-link2" %>にコメントしました</p>
    <% else %>
      <p>
        <%= link_to notification.post, id: "notification-link3" do %>
          <%= notification.post.user.user_name %>
        <% end %>
        さんの投稿にコメントしました
      </p>
      <p class="notification-text"><%= Comment.find(notification.comment_id)&.comment %></p>
    <% end %>
  <% when 'chat' then %>
    <p><%= link_to 'チャットルーム', chat_path(notification.chat.room), id: "notification-link4" %>にメッセージを送りました</p>
    <p class="notification-text"><%= Chat.find_by(id: notification.comment_id)&.message %></p>
  <% end %>
    <!--case = 対象オブジェクト = notificationのactionカラムの値を対象としている-->
    <!--when 'α' then = 'α'と一致する場合に行う処理-->

  <p class="notification-text"><%= time_ago_in_words(notification.created_at).upcase %></p>

</div>
